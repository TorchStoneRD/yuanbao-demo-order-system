# 元寶外部金流系統API文件

# 文件目的
  - 本文檔定義外部金流API進出參規範,並提供範例格式.


# 傳輸規範
  - 使用TPC/IP作為傳輸層協議
  - 使用HTTP、WebSocket作為應用層協議
  - 傳遞參數格式皆為json(須使用Content-type規範header)
  - 此接口清單遵循restful設計理念


# 接口說明
## HTTP接口清單
  - game-info(GET)-<a href="#game-info(GET)">取得遊戲資訊</a>
  - login-info(GET)-<a href="#login-info(GET)">取得玩家資訊</a>
  - apply-dealer-default-value(GET)-<a href="#apply-dealer-default-value(GET)">取得上莊預設值</a>
  - apply-dealer(PUT)-<a href="#apply-dealer(PUT)">玩家申請上莊</a>
  - who-is-the-dealer(GET)-<a href="#who-is-the-dealer(GET)">誰是莊家</a>
  - bet(PUT)-<a href="#bet(PUT)">創建注單</a>
  - result(GET)-<a href="#result(GET)">取得遊戲結果</a>
  - bet(GET)-<a href="#bet(GET)">取得注單紀錄</a>

## WS接口清單
  - result(WS)-<a href="#result(WS)">通知本局開獎結果</a>
  - chat-box(WS)-<a href="#chat-box(WS)">聊天室訊息</a>
  - serverTime(WS)-<a href="#serverTime(WS)">取得伺服器时间</a>
 
## 參數說明(<a href="#parametersTable">參數說明</a>) 

### <p id="login-info(GET)">login-info(GET)-驗證會員資訊</p>
#### Reuqest

- Method: **GET**
- URL: ```/login-info```
- Headers： Content-Type:application/json
- Body:
```
{
 "account": "GA000032",
 "requestTime": "20180626101122",
 "spId": "SP20180522131415",
 "sign": "c54f3a4858517b28df398873bb50e6d5"
}
```

#### Response
- Body
```
{ 
	"retCode": "0",
	"data": {
		[{"status": "0"},
		 {"status": "1"},
		 {"status": "0"}]
	}
}
```


### <p id="updateAmt(POST)">updateAmt(POST)-更新餘額</p>
#### Reuqest

- Method: **POST**
- URL: ```/updateAmt```
- Headers： Content-Type:application/json
- Body:
```
{
 "account": "GA000032",
 "amt": "500",
 "requestTime": "20180626101122",
 "orderNo": "DE20180626102233",
 "spId": "SP20180522131415",
 "sign": "c54f3a4858517b28df398873bb50e6d5"
}

```
#### Response
- Body
```
{ 
	"retCode": "0",
	"data": {
		
	}
}
```

### <p id="check-connection(POST)">check-connection(POST)-取得上莊預設值</p>
#### Reuqest

- Method: **POST**
- URL: ```/check-connection```
- Headers： Content-Type:application/json
- Body:
```
{
 "orderNo": "DE20180626102233",
 "queryTimeS": "20180626102244",
 "queryTimeE": "DE20180626103355",
 "sign": "c54f3a4858517b28df398873bb50e6d5"
}
```

#### Response
- Body
```
{ 
	"retCode": "0",
	"data": {
		[{"orderNo": "DE20180626102233",
		  "account": "GA00032",
		  "status": "1",
		  "amt": 500,
		  "requestTime": "20180626101122",
		  "responseTime": "20180626104455"},
		  
		  {"orderNo": "DE20180626102233",
		  "account": "GA00032",
		  "status": "1",
		  "amt": 500,
		  "requestTime": "20180626101122",
		  "responseTime": "20180626104455"},
		  
		  {"orderNo": "DE20180626102233",
		  "account": "GA00032",
		  "status": "1",
		  "amt": 500,
		  "requestTime": "20180626101122",
		  "responseTime": "20180626104455"}]
		
	}
}
```





## <p id="parametersTable">參數說明</p>
|參數名稱|參數名稱|參數格式||
|:--|:--|:--|:--|
|spId||String(32)|租用平台ID|
|account||String(32)|玩家帳號|
|amt||Integer(11)|玩家餘額(單位:cent)|
|requestTime||String(14)|請求時間(yyyyMMddHHmmss)|
|responseTime||String(14)|回應時間(yyyyMMddHHmmss)|
|queryTimeS||String(14)|查詢時間範圍開頭(yyyyMMddHHmmss)|
|queryTimeE||String(14)|查詢時間範圍結尾(yyyyMMddHHmmss)|
|status||String(1)|訂單狀態|
|sign||String(32)|MD5簽名|
|retCode||String(1)|回應碼|
|data||String(32)|數據內容|


# 待更新項目

  - 將加上錯誤碼說明

# 更新日誌
 

